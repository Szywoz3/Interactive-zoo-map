<!DOCTYPE html>

<head>
  <!-- Meta dane i podstawowe style -->
  <meta charset="UTF-8">
  <title>Mapa z</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="leaflet_popup_css.css"></link>
  
  <style>
    /* Ogólny reset i styl ekranów */
    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f5f5f5;
    }

    /* Kontener mapy (widoczny po ukryciu ekranu startowego) */
    #map {
      position: fixed;
      height: 100%;
      width: 100%;
    }

    .intro-screen {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px 16px;
      background: linear-gradient(135deg, #2be1db, #e9c40f);
      color: #ffffff;
      z-index: 2000;
      transition: opacity 280ms ease;
    }

    .intro-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .intro-screen h1 {
      margin: 0 0 12px 0;
      font-size: 2rem;
      letter-spacing: 0.5px;
    }

    .intro-screen p {
      max-width: 460px;
      margin: 0 0 24px 0;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    .intro-screen button {
      padding: 12px 32px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: #003366;
      background: #ffffff;
      font-weight: 600;
      box-shadow: 0 10px 20px rgba(0,0,0,0.12);
      transition: transform 160ms ease, box-shadow 160ms ease;
    }

    .intro-screen button:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 24px rgba(0,0,0,0.18);
    }

    .intro-screen button.is-disabled,
    .intro-screen button:disabled {
      cursor: not-allowed;
      opacity: 0.75;
      color: #7a8baa;
      background: rgba(255,255,255,0.85);
      box-shadow: none;
      transform: none;
    }

    .loading-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
      font-size: 0.95rem;
      color: rgba(255,255,255,0.86);
      letter-spacing: 0.3px;
      transition: opacity 200ms ease, transform 200ms ease;
    }

    .loading-indicator.hidden {
      opacity: 0;
      transform: translateY(-4px);
      pointer-events: none;
    }

    .loading-indicator .spinner {
      width: 28px;
      height: 28px;
      border: 3px solid rgba(255,255,255,0.35);
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spin 900ms linear infinite;
    }

    .intro-icon {
      width: 84px;
      height: 75px;
      margin: 16px 0 24px;   
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>

<!-- Ekran startowy z informacjami o autorze i przyciskiem wejścia -->
<div class="intro-screen" id="intro-screen">
  <h1>Interaktywna mapa Ogrodu Zoologicznego w 
  Poznaniu przygotowana w ramach pracy inżynierskiej</h1>
  <p>Autor: Szymon Woźniak</p>
  <img src="logo.png"
     class="intro-icon"
     alt="Logo">
  <div class="loading-indicator" id="loading-indicator" role="status" aria-live="polite">
    <div class="spinner" aria-hidden="true"></div>
    <span>Ładowanie mapy...</span>
  </div>
  <button type="button" id="enter-map-btn" disabled>Przejdź do mapy</button>
</div>

<div id="map"></div>

<!-- Skrypt obsługujący intro i przejście do mapy -->
<script>
  (function() {
    var introScreen = document.getElementById('intro-screen');
    var enterBtn = document.getElementById('enter-map-btn');
    var loadingIndicator = document.getElementById('loading-indicator');
    var entranceUnlocked = false;

    function unlockEntrance() {
      if (entranceUnlocked) return;
      entranceUnlocked = true;
      if (enterBtn) {
        enterBtn.disabled = false;
        enterBtn.classList.remove('is-disabled');
      }
      if (loadingIndicator) {
        loadingIndicator.classList.add('hidden');
        setTimeout(function() {
          loadingIndicator.style.display = 'none';
        }, 240);
      }
    }

    if (enterBtn && introScreen) {
      enterBtn.classList.add('is-disabled');
      enterBtn.addEventListener('click', function () {
        if (enterBtn.disabled) return;
        introScreen.classList.add('hidden');
        setTimeout(function () {
          introScreen.style.display = 'none';
        }, 320);
      });
    }

    document.addEventListener('mapReady', unlockEntrance);

    // awaryjnie odblokuj po czasie, jeśli zdarzenie nie nadejdzie
    setTimeout(unlockEntrance, 12000);
  })();
</script>

<!-- Główny skrypt mapy -->

<script src="map.js"></script>

</body>
</html> 




 